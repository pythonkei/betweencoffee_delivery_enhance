<!-- eshop/templates/eshop/order_status_display.html -->
{% with order_type=order.get_order_type_summary %}
<div class="mt-4">
    {% if order_type.is_beans_only %}
        <!-- 純咖啡豆訂單 -->
        <div class="p-3 bg-theme rounded">
            <div class="font-weight-normal text-white h5">
                <i class="fas fa-check-circle mr-1"></i>
                您的咖啡豆已準備就緒，隨時可以提取！
            </div>
        </div>
    
    {% elif order_type.has_coffee %}
        <!-- 咖啡訂單（包含混合訂單） -->
        <div id="coffee-order-section">
            <!-- 进度条 -->
            <div class="mt-4">
                <div class="progress progress-modern">
                    <div id="order-progress" class="progress-bar progress-bar-striped progress-bar-animated progress-bar-modern" 
                        role="progressbar" 
                        style="width: {{ status_info.progress_percentage }}%;"
                        aria-valuenow="{{ status_info.progress_percentage }}" 
                        aria-valuemin="0" 
                        aria-valuemax="100">
                        <span id="progress-text">
                            {{ status_info.progress_display }}
                        </span>
                    </div>
                </div>
                
                <div class="d-flex justify-content-between mt-2 progress-labels">
                    <span>訂單確認</span>
                    <span>製作中</span>
                    <span>完成</span>
                </div>
            </div>
            
            <!-- 队列信息 -->
            <div class="mt-4 p-3 bg-theme rounded" id="queue-info-section">
                <div class="font-weight-normal text-white">
                    <div id="queue-status-display">
                        <i class="fas fa-clock mr-2"></i>
                        <span id="queue-status-text">
                            {{ status_info.queue_display }}
                        </span>
                    </div>
                    
                    <div class="mt-2" id="estimated-time-display">
                        <i class="fas fa-hourglass-end mr-2"></i>
                        預計完成時間: 
                        <span class="font-weight-bold">
                            {{ status_info.estimated_time }}
                        </span>
                        <span id="countdown-text">
                            {{ status_info.remaining_display }}
                        </span>
                    </div>
                    
                    <div class="mt-2" id="queue-message">
                        {{ status_info.queue_message }}
                    </div>
                </div>
            </div>
            
            <!-- 完成状态 -->
            <div class="mt-4 p-3 bg-success rounded" id="ready-section" 
                style="display: {% if status_info.is_ready %}block{% else %}none{% endif %};">
                <div class="font-weight-normal text-white h5">
                    <i class="fas fa-check-circle mr-1"></i>
                    {{ status_info.status_message }}
                </div>
            </div>
        </div>
    
    {% else %}
        <!-- 其他商品訂單 -->
        <div class="p-3 bg-theme rounded">
            <div class="font-weight-normal text-white h5">
                <i class="fas fa-check-circle mr-1"></i>
                您的商品已準備就緒，隨時可以提取！
            </div>
        </div>
    {% endif %}
</div>
{% endwith %}